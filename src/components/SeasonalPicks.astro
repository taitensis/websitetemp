---
import { Typography } from '@/components/ui/typography';
import { Card } from '@/components/ui/card';
import { join } from '@/lib/utils';
import type { CollectionEntry } from 'astro:content';
import { t, setLocale, DEFAULT_LOCALE, type Locale } from '@/i18n/ui';

const locale = (Astro.currentLocale ?? DEFAULT_LOCALE) as Locale;
setLocale(locale); // Set the global locale context

type RecipeEntry = CollectionEntry<'recipes'>;

interface Props {
  items?: RecipeEntry[];
  base?: string;
}

const { items = [], base = import.meta.env.BASE_URL } = Astro.props;
---

{
  items.length > 0 && (
    <section class="mt-2xl mx-auto w-full max-w-6xl">
      <Typography variant="h2">{t('recipes.seasonal_picks')}</Typography>

      <div class="gap-md mt-md grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4">
        {items.map((r) => (
          <a
            href={join(base, `recipes/${r.slug}/`)}
            class="group focus-visible:ring-primary/30 focus-visible:ring-offset-background block transition-transform duration-200 hover:-translate-y-0.5 hover:no-underline focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none motion-reduce:transform-none motion-reduce:transition-none"
          >
            <Card className="overflow-hidden rounded-xl px-md py-md m-0 border border-border/60 bg-card/60 shadow-sm transition-colors transition-shadow duration-200 hover:border-border hover:bg-card hover:shadow-md">
              <h3 class="text-foreground group-hover:text-primary text-base font-medium transition-colors duration-200">
                {r.data.title}
              </h3>
            </Card>
          </a>
        ))}
      </div>
    </section>
  )
}
