---
// LangSwitcher.astro
import LangMenu from '@/components/LangMenu';
import { LOCALES, getLocaleLabel, type Locale } from '@/i18n/locales';
import { getRelativeLocaleUrl } from 'astro:i18n';

const current = Astro.currentLocale as Locale;

// Use explicit path so links point to the same route in each locale
const path = Astro.url.pathname;

const items = (LOCALES as readonly Locale[]).map((locale) => ({
  label: getLocaleLabel(locale),
  url: getRelativeLocaleUrl(locale, path),
  current: locale === current,
}));

const currentLabel = getLocaleLabel(current);
---

<LangMenu client:load items={items} currentLabel={currentLabel} />
